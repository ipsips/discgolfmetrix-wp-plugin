!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n(1);for(var l=n(2),u=n(3),c=n(11),f=n(32),p=r(f),d=n(34),h=r(d),y=n(35),m=r(y),v=n(37),b=r(v),g=n(36),w={loading:function(t,e){switch(e.type){case"FETCH_RESULTS_REQ":return!0;case"FETCH_RESULTS_RES":case"FETCH_RESULTS_ERR":return!1;default:return t}},data:function(t,e){switch(e.type){case"FETCH_RESULTS_RES":var n=!!(0,g.getDeepProp)(e,"response.Competition");return n||alert(window.skoorinResults.l10n.missing_data_error),n?s({},t,{results:e.response}):t;case"FETCH_FILTER_RES":var r=!!(0,g.getDeepProp)(e,"response.competitions");return r||alert(window.skoorinResults.l10n.missing_data_error),r?s({},t,{filters:e.response}):t;case"FETCH_RESULTS_ERR":case"FETCH_FILTER_ERR":alert(window.skoorinResults.l10n.network_error);default:return t}},filters:function(t,e){if("FILTER"!=e.type)return t;var n={};for(var r in t)n[r]="players"==r?{selected:"all",lastChanged:Date.now()}:"all";return s({},n,e.payload)}},S=function(){function t(e,n){var r=this;i(this,t),this.onCompetitionSelect=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&r.competitionSelect)for(var n=0;n<r.competitionSelect.competitions.length;n++)r.competitionSelect.competitions[n].dataset.id==t&&r.competitionSelect.selectCompetition(r.competitionSelect.competitions[n]);r.store.dispatch({type:"FILTER",payload:{}}),r.store.dispatch({type:"API_REQ",payload:{types:["FETCH_RESULTS_REQ","FETCH_RESULTS_RES","FETCH_RESULTS_ERR"],query:"content=result&id="+t}}),r.store.dispatch({type:"API_REQ",payload:{types:["FETCH_FILTER_REQ","FETCH_FILTER_RES","FETCH_FILTER_ERR"],query:"content=wordpress_filters&competition_id="+t}})},this.el=e,this.competitionId=this.el.dataset.competitionId,this.store=(0,c.createStore)(function(t,e){return{loading:w.loading(t.loading,e),data:w.data(t.data,e),filters:w.filters(t.filters,e)}},this.getInitialState(n),(0,c.applyMiddleware)(p.default)),this.store.subscribe(function(){return r.setState(r.store.getState())}),this.setState(this.store.getState()),this.refetchInSeconds(30)}return a(t,[{key:"getInitialState",value:function(t){return{loading:!1,data:t,filters:this.initFilters(t.filters_selected,t.filters)}}},{key:"setState",value:function(t){this.state=s({},this.state,t),this.render()}},{key:"initFilters",value:function(t,e){var n=this,r={};return this.filters={},t.forEach(function(t){if("competitions"!=t){var e=n.el.querySelector(".skoorin-results-filter-control-select-"+t),o=e.querySelector('select[name="'+t+'"]');n.filters[t]={container:e,select:o},"players"==t?r[t]={selected:(0,g.getMultiSelectValue)(o),lastChanged:Date.now()}:r[t]=o.value}}),r}},{key:"render",value:function(){var t=(0,g.getDeepProp)(this.state,"data.results.Competition"),e=t.ID;e&&e!=this.competitionId&&(this.refetchInSeconds(30),this.competitionId=e),this.table?this.table.setState(this.state):this.table=new b.default(this.el.querySelector(".skoorin-results-table"),this.state,this.onCompetitionSelect),this.competitionSelect||(this.competitionSelect=new h.default(this.el.querySelector(".skoorin-select-competitions"),this.onCompetitionSelect));for(var n in this.filters)"players"==n?this.playersFilter?this.playersFilter.setState(this.state):this.playersFilter=new m.default(this.filters[n],this.state,this.store):this.renderFilter(n)}},{key:"renderFilter",value:function(t){var e,n=this.state.filters[t],r=(0,g.getDeepProp)(this.state,["data","filters",t]),i=(0,l.html)("div",{class:(e={},o(e,"skoorin-results-filter-control-select-"+t,1),o(e,"no-options",!Array.isArray(r)||!r.length),e)},(0,l.html)("select",{name:t,"on-change":this.onChangeFilter.bind(this,t)},(0,l.html)("option",{value:"all",selected:"all"==n},window.skoorinResults.l10n.all[t]),Array.isArray(r)?r.map(function(e){var r="groups"==t?e.Number:e.Name;return(0,l.html)("option",{value:r,selected:n==r},r)}):""));this.filters[t].container instanceof Element&&(this.filters[t].container.innerHTML=""),this.filters[t].container=(0,u.patch)(this.filters[t].container,i)}},{key:"onChangeFilter",value:function(t,e){this.store.dispatch({type:"FILTER",payload:o({},t,e.target.value)})}},{key:"refetchInSeconds",value:function(t){var e=this;clearTimeout(this.refetchTimer),this.refetchTimer=setTimeout(function(){var n=(0,g.getDeepProp)(e.state,"data.results.Competition"),r=n.ID;r&&e.store.dispatch({type:"API_REQ",payload:{types:["FETCH_RESULTS_REQ","FETCH_RESULTS_RES","FETCH_RESULTS_ERR"],query:"content=result&id="+r}}),e.refetchInSeconds(t)},1e3*t)}}]),t}(),x=document.querySelectorAll(".skoorin-results"),k=0;k<x.length;k++){var E=void 0;try{E=JSON.parse(x[k].querySelector(".skoorin-results-data").innerHTML)}catch(t){console.error("Could not parse results data. This could mean there was a network error when getting the data from Skoorin data API.\n",t);break}new S(x[k],E)}},function(t,e){"use strict";window.optimizedResize=function(){function t(){o||(o=!0,window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,66))}function e(){r.forEach(function(t){t()}),o=!1}function n(t){t&&r.push(t)}var r=[],o=!1;return{add:function(e){r.length||window.addEventListener("resize",t),n(e)},remove:function(e){var n=r.indexOf(e);n<0||(r.splice(n,1),r.length||window.removeEventListener("resize",t))}}}()},function(t,e){"use strict";function n(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||null===t||void 0===t}function r(t,e,n,r){function o(t,e,n){var r=i[t]||(i[t]={});r[e]=n}for(var i={ns:e},a=0,s=r.length;a<s;a++){var l=r[a];t[l]&&(i[l]=t[l])}for(var u in t)if("key"!==u&&"classNames"!==u&&"selector"!==u){var c=u.indexOf("-");c>0?o(u.slice(0,c),u.slice(c+1),t[u]):i[u]||o(n,u,t[u])}return i}function o(t,e,o,i,a,s){if(a.selector&&(i+=a.selector),a.classNames){var l=a.classNames;i=i+"."+(Array.isArray(l)?l.join("."):l.replace(/\s+/g,"."))}return{sel:i,data:r(a,t,e,o),children:s.map(function(t){return n(t)?{text:t}:t}),key:a.key}}function i(t,e,n,r,o,i){var a;if("function"==typeof r)a=r(o,i);else if(r&&"function"==typeof r.view)a=r.view(o,i);else{if(!r||"function"!=typeof r.render)throw"JSX tag must be either a string, a function or an object with 'view' or 'render' methods";a=r.render(o,i)}return a.key=o.key,a}function a(t,e,n){for(var r=e,o=t.length;r<o;r++){var i=t[r];Array.isArray(i)?a(i,0,n):n.push(i)}}function s(t){if(t)for(var e=0,n=t.length;e<n;e++)if(Array.isArray(t[e])){var r=t.slice(0,e);a(t,e,r),t=r;break}return t}function l(t,e,n,r,a,l){return a=a||{},l=s(l),"string"==typeof r?o(t,e,n,r,a,l):i(t,e,n,r,a,l)}function u(t,e,n){return function(r,o,i){return(arguments.length>3||!Array.isArray(i))&&(i=p.call(arguments,2)),l(t,e||"props",n||f,r,o,i)}}var c="http://www.w3.org/2000/svg",f=["hook","on","style","class","props","attrs"],p=Array.prototype.slice;t.exports={html:u(void 0),svg:u(c,"attrs"),JSX:u}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.patch=void 0;var o=n(4),i=r(o),a=n(8),s=r(a),l=n(9),u=r(l),c=n(10),f=r(c);e.patch=i.default.init([s.default,u.default,f.default])},function(t,e,n){"use strict";function r(t){return void 0===t}function o(t){return void 0!==t}function i(t,e){return t.key===e.key&&t.sel===e.sel}function a(t,e,n){var r,i,a={};for(r=e;r<=n;++r)i=t[r].key,o(i)&&(a[i]=r);return a}function s(t,e){function n(t){var n=t.id?"#"+t.id:"",r=t.className?"."+t.className.split(" ").join("."):"";return l(e.tagName(t).toLowerCase()+n+r,{},[],void 0,t)}function s(t,n){return function(){if(0===--n){var r=e.parentNode(t);e.removeChild(r,t)}}}function d(t,n){var r,i=t.data;o(i)&&o(r=i.hook)&&o(r=r.init)&&(r(t),i=t.data);var a,s=t.children,l=t.sel;if(o(l)){var c=l.indexOf("#"),p=l.indexOf(".",c),h=c>0?c:l.length,y=p>0?p:l.length,m=c!==-1||p!==-1?l.slice(0,Math.min(h,y)):l;if(a=t.elm=o(i)&&o(r=i.ns)?e.createElementNS(r,m):e.createElement(m),h<y&&(a.id=l.slice(h+1,y)),p>0&&(a.className=l.slice(y+1).replace(/\./g," ")),u.array(s))for(r=0;r<s.length;++r)e.appendChild(a,d(s[r],n));else u.primitive(t.text)&&e.appendChild(a,e.createTextNode(t.text));for(r=0;r<S.create.length;++r)S.create[r](f,t);r=t.data.hook,o(r)&&(r.create&&r.create(f,t),r.insert&&n.push(t))}else a=t.elm=e.createTextNode(t.text);return t.elm}function h(t,n,r,o,i,a){for(;o<=i;++o)e.insertBefore(t,d(r[o],a),n)}function y(t){var e,n,r=t.data;if(o(r)){for(o(e=r.hook)&&o(e=e.destroy)&&e(t),e=0;e<S.destroy.length;++e)S.destroy[e](t);if(o(e=t.children))for(n=0;n<t.children.length;++n)y(t.children[n])}}function m(t,n,r,i){for(;r<=i;++r){var a,l,u,c=n[r];if(o(c))if(o(c.sel)){for(y(c),l=S.remove.length+1,u=s(c.elm,l),a=0;a<S.remove.length;++a)S.remove[a](c,u);o(a=c.data)&&o(a=a.hook)&&o(a=a.remove)?a(c,u):u()}else e.removeChild(t,c.elm)}}function v(t,n,o,s){for(var l,u,c,f,p=0,y=0,v=n.length-1,g=n[0],w=n[v],S=o.length-1,x=o[0],k=o[S];p<=v&&y<=S;)r(g)?g=n[++p]:r(w)?w=n[--v]:i(g,x)?(b(g,x,s),g=n[++p],x=o[++y]):i(w,k)?(b(w,k,s),w=n[--v],k=o[--S]):i(g,k)?(b(g,k,s),e.insertBefore(t,g.elm,e.nextSibling(w.elm)),g=n[++p],k=o[--S]):i(w,x)?(b(w,x,s),e.insertBefore(t,w.elm,g.elm),w=n[--v],x=o[++y]):(r(l)&&(l=a(n,p,v)),u=l[x.key],r(u)?(e.insertBefore(t,d(x,s),g.elm),x=o[++y]):(c=n[u],b(c,x,s),n[u]=void 0,e.insertBefore(t,c.elm,g.elm),x=o[++y]));p>v?(f=r(o[S+1])?null:o[S+1].elm,h(t,f,o,y,S,s)):y>S&&m(t,n,p,v)}function b(t,n,a){var s,l;o(s=n.data)&&o(l=s.hook)&&o(s=l.prepatch)&&s(t,n);var u=n.elm=t.elm,c=t.children,f=n.children;if(t!==n){if(!i(t,n)){var p=e.parentNode(t.elm);return u=d(n,a),e.insertBefore(p,u,t.elm),void m(p,[t],0,0)}if(o(n.data)){for(s=0;s<S.update.length;++s)S.update[s](t,n);s=n.data.hook,o(s)&&o(s=s.update)&&s(t,n)}r(n.text)?o(c)&&o(f)?c!==f&&v(u,c,f,a):o(f)?(o(t.text)&&e.setTextContent(u,""),h(u,null,f,0,f.length-1,a)):o(c)?m(u,c,0,c.length-1):o(t.text)&&e.setTextContent(u,""):t.text!==n.text&&e.setTextContent(u,n.text),o(l)&&o(s=l.postpatch)&&s(t,n)}}var g,w,S={};for(r(e)&&(e=c),g=0;g<p.length;++g)for(S[p[g]]=[],w=0;w<t.length;++w)void 0!==t[w][p[g]]&&S[p[g]].push(t[w][p[g]]);return function(t,o){var a,s,l,u=[];for(a=0;a<S.pre.length;++a)S.pre[a]();for(r(t.sel)&&(t=n(t)),i(t,o)?b(t,o,u):(s=t.elm,l=e.parentNode(s),d(o,u),null!==l&&(e.insertBefore(l,o.elm,e.nextSibling(s)),m(l,[t],0,0))),a=0;a<u.length;++a)u[a].data.hook.insert(u[a]);for(a=0;a<S.post.length;++a)S.post[a]();return o}}var l=n(5),u=n(6),c=n(7),f=l("",{},[],void 0,void 0),p=["create","update","remove","destroy","pre","post"];t.exports={init:s}},function(t,e){t.exports=function(t,e,n,r,o){var i=void 0===e?void 0:e.key;return{sel:t,data:e,children:n,text:r,elm:o,key:i}}},function(t,e){t.exports={array:Array.isArray,primitive:function(t){return"string"==typeof t||"number"==typeof t}}},function(t,e){function n(t){return document.createElement(t)}function r(t,e){return document.createElementNS(t,e)}function o(t){return document.createTextNode(t)}function i(t,e,n){t.insertBefore(e,n)}function a(t,e){t.removeChild(e)}function s(t,e){t.appendChild(e)}function l(t){return t.parentElement}function u(t){return t.nextSibling}function c(t){return t.tagName}function f(t,e){t.textContent=e}t.exports={createElement:n,createElementNS:r,createTextNode:o,appendChild:s,removeChild:a,insertBefore:i,parentNode:l,nextSibling:u,tagName:c,setTextContent:f}},function(t,e){function n(t,e){var n,r,o=e.elm,i=t.data.class,a=e.data.class;if(i||a){i=i||{},a=a||{};for(r in i)a[r]||o.classList.remove(r);for(r in a)n=a[r],n!==i[r]&&o.classList[n?"add":"remove"](r)}}t.exports={create:n,update:n}},function(t,e){function n(t,e){var n,r,o,i=e.elm,a=t.data.props,s=e.data.props;if(a||s){a=a||{},s=s||{};for(n in a)s[n]||delete i[n];for(n in s)r=s[n],o=a[n],o===r||"value"===n&&i[n]===r||(i[n]=r)}}t.exports={create:n,update:n}},function(t,e){function n(t,e,r){if("function"==typeof t)t.call(e,r,e);else if("object"==typeof t)if("function"==typeof t[0])if(2===t.length)t[0].call(e,t[1],r,e);else{var o=t.slice(1);o.push(r),o.push(e),t[0].apply(e,o)}else for(var i=0;i<t.length;i++)n(t[i])}function r(t,e){var r=t.type,o=e.data.on;o&&o[r]&&n(o[r],e,t)}function o(){return function t(e){r(e,t.vnode)}}function i(t,e){var n,r=t.data.on,i=t.listener,a=t.elm,s=e&&e.data.on,l=e&&e.elm;if(r!==s){if(r&&i)if(s)for(n in r)s[n]||a.removeEventListener(n,i,!1);else for(n in r)a.removeEventListener(n,i,!1);if(s){var u=e.listener=t.listener||o();if(u.vnode=e,r)for(n in s)r[n]||l.addEventListener(n,u,!1);else for(n in s)l.addEventListener(n,u,!1)}}}t.exports={create:i,update:i,destroy:i}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.compose=e.applyMiddleware=e.bindActionCreators=e.combineReducers=e.createStore=void 0;var o=n(12),i=r(o),a=n(27),s=r(a),l=n(29),u=r(l),c=n(30),f=r(c),p=n(31),d=r(p),h=n(28);r(h);e.createStore=i.default,e.combineReducers=s.default,e.bindActionCreators=u.default,e.applyMiddleware=f.default,e.compose=d.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){function r(){v===m&&(v=m.slice())}function i(){return y}function s(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return r(),v.push(t),function(){if(e){e=!1,r();var n=v.indexOf(t);v.splice(n,1)}}}function c(t){if(!(0,a.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(b)throw new Error("Reducers may not dispatch actions.");try{b=!0,y=h(y,t)}finally{b=!1}for(var e=m=v,n=0;n<e.length;n++)e[n]();return t}function f(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");h=t,c({type:u.INIT})}function p(){var t,e=s;return t={subscribe:function(t){function n(){t.next&&t.next(i())}if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");n();var r=e(n);return{unsubscribe:r}}},t[l.default]=function(){return this},t}var d;if("function"==typeof e&&"undefined"==typeof n&&(n=e,e=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(o)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var h=t,y=e,m=[],v=m,b=!1;return c({type:u.INIT}),d={dispatch:c,subscribe:s,getState:i,replaceReducer:f},d[l.default]=p,d}e.__esModule=!0,e.ActionTypes=void 0,e.default=o;var i=n(13),a=r(i),s=n(23),l=r(s),u=e.ActionTypes={INIT:"@@redux/INIT"}},function(t,e,n){function r(t){if(!a(t)||o(t)!=s)return!1;var e=i(t);if(null===e)return!0;var n=f.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==p}var o=n(14),i=n(20),a=n(22),s="[object Object]",l=Function.prototype,u=Object.prototype,c=l.toString,f=u.hasOwnProperty,p=c.call(Object);t.exports=r},function(t,e,n){function r(t){return null==t?void 0===t?l:s:(t=Object(t),u&&u in t?i(t):a(t))}var o=n(15),i=n(18),a=n(19),s="[object Null]",l="[object Undefined]",u=o?o.toStringTag:void 0;t.exports=r},function(t,e,n){var r=n(16),o=r.Symbol;t.exports=o},function(t,e,n){var r=n(17),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,function(){return this}())},function(t,e,n){function r(t){var e=a.call(t,l),n=t[l];try{t[l]=void 0;var r=!0}catch(t){}var o=s.call(t);return r&&(e?t[l]=n:delete t[l]),o}var o=n(15),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,l=o?o.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return o.call(t)}var r=Object.prototype,o=r.toString;t.exports=n},function(t,e,n){var r=n(21),o=r(Object.getPrototypeOf,Object);t.exports=o},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){t.exports=n(24)},function(t,e,n){(function(t,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,a=n(26),s=o(a);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:r;var l=(0,s.default)(i);e.default=l}).call(e,function(){return this}(),n(25)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function n(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=e&&e.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function i(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+e+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var o="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:o}))throw new Error('Reducer "'+e+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var a=e[r];"function"==typeof t[a]&&(n[a]=t[a])}var s,l=Object.keys(n);try{i(n)}catch(t){s=t}return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments[1];if(s)throw s;for(var r=!1,i={},a=0;a<l.length;a++){var u=l[a],c=n[u],f=t[u],p=c(f,e);if("undefined"==typeof p){var d=o(u,e);throw new Error(d)}i[u]=p,r=r||p!==f}return r?i:t}}e.__esModule=!0,e.default=a;var s=n(12),l=n(13),u=(r(l),n(28));r(u)},function(t,e){"use strict";function n(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}e.__esModule=!0,e.default=n},function(t,e){"use strict";function n(t,e){return function(){return e(t.apply(void 0,arguments))}}function r(t,e){if("function"==typeof t)return n(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(t),o={},i=0;i<r.length;i++){var a=r[i],s=t[a];"function"==typeof s&&(o[a]=n(s,e))}return o}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,o){var a=t(n,r,o),l=a.dispatch,u=[],c={getState:a.getState,dispatch:function(t){return l(t)}};return u=e.map(function(t){return t(c)}),l=s.default.apply(void 0,u)(a.dispatch),i({},a,{dispatch:l})}}}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=o;var a=n(31),s=r(a)},function(t,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return function(t){return t};if(1===e.length)return e[0];var r=e[e.length-1],o=e.slice(0,-1);return function(){return o.reduceRight(function(t,e){return e(t)},r.apply(void 0,arguments))}}e.__esModule=!0,e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n="https://dgmtrx.com/api.php?"+t.query,r={credentials:"same-origin",method:t.verb||(t.data?"POST":"GET"),headers:{Accept:"application/json"}};return t.data&&(s(r.headers,{"Content-Type":"application/x-www-form-urlencoded"}),r.body=t.data),(0,c.default)(n,r).then(i)}function i(t){return t.ok?t.json():t.json().then(function(e){return a(t,e)},function(){return a(t)})}function a(t,e){throw s({status:t.status,statusText:t.statusText,message:t.statusText},e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=n(33),c=r(u);e.default=function(t){return function(e){return function(n){if("API_REQ"!==n.type||!n.payload)return e(n);var r=l(n.payload.types,3),i=r[0],a=r[1],s=r[2];return e({type:i,payload:n.payload}),o(n.payload,t).then(function(t){return e({type:a,payload:n.payload,response:t})},function(t){return e({type:s,payload:n.payload,error:t})})}}}},function(t,e){"use strict";function n(t,e){return new Promise(function(n){e=r({method:"GET",headers:{}},e);var o=new XMLHttpRequest,i=function(){return n({ok:200<=o.status&&o.status<300,status:o.status,statusText:o.statusText,json:function(){return new Promise(function(t,e){try{var n=JSON.parse(o.responseText.trim());t(n)}catch(t){e(t)}})}})};o.open(e.method,t),Object.keys(e.headers).forEach(function(t){return o.setRequestHeader(t,e.headers[t])}),o.addEventListener("error",i),o.addEventListener("abort",i),o.upload.addEventListener("error",i),o.upload.addEventListener("abort",i),o.addEventListener("readystatechange",function(){o.readyState===XMLHttpRequest.DONE&&i()}),"function"==typeof e.onUploadProgress&&o.upload.addEventListener("progress",e.onUploadProgress),o.send(e.body)})}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=n},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,i,a,s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(1);var l=(i=o=function(){function t(e,n){var o=this;r(this,t),a.call(this),this.el=e,this.onChange=n,this.overlay=this.getOverlay(),this.options=e.querySelector(".options"),this.competitions=this.options.querySelectorAll(".competition"),this.selectedOption=e.querySelector(".selected option"),e.querySelector(".selected").addEventListener("click",function(t){return o.open()}),document.addEventListener("mousedown",function(t){return o.onDocumentClick(t)}),document.addEventListener("touchend",function(t){return o.onDocumentClick(t)}),this.activeCompetitionIdx=0;for(var i=0;i<this.competitions.length;i++)this.competitions[i].addEventListener("click",this.onSelect),this.competitions[i].classList.contains("active")&&(this.activeCompetitionIdx=i);var s=e.querySelectorAll(".competition-nav-button");this.prevBtn=s[0],this.nextBtn=s[1],this.setButtonStates(),this.prevBtn.addEventListener("click",function(){clearTimeout(o.btnThrottle),o.btnThrottle=setTimeout(o.onClickPrev,400)}),this.nextBtn.addEventListener("click",function(){clearTimeout(o.btnThrottle),o.btnThrottle=setTimeout(o.onClickNext,400)})}return s(t,[{key:"getOverlay",value:function(){var t=document.querySelector(".skoorin-select-competitions-overlay");return t||(t=document.createElement("div"),t.setAttribute("class","skoorin-select-competitions-overlay"),document.body.insertBefore(t,null)),t}},{key:"setButtonStates",value:function(){0==this.activeCompetitionIdx?this.prevBtn.classList.add("disabled"):this.prevBtn.classList.remove("disabled"),this.activeCompetitionIdx==this.competitions.length-1?this.nextBtn.classList.add("disabled"):this.nextBtn.classList.remove("disabled")}}]),t}(),a=function(){var t=this;this.onDocumentClick=function(e){for(var n=e.target;null!==n;){if(t.options===n||t.selected===n)return;n=n.parentNode}t.close()},this.onSelect=function(e){t.close(),t.selectCompetition(e.target)},this.selectCompetition=function(e){t.selectedOption.textContent=e.innerHTML;for(var n=0;n<t.competitions.length;n++)t.competitions[n]===e?(t.activeCompetitionIdx=n,t.competitions[n].classList.add("active")):t.competitions[n].classList.remove("active");t.setButtonStates(),"function"==typeof t.onChange&&t.onChange(e.dataset.id)},this.open=function(){return t.isVisible(t.options)?t.close():(t.options.style.display="block",t.position(!0),void optimizedResize.add(t.position))},this.close=function(){t.options.style.display="none",t.overlay.style.display="none",optimizedResize.remove(t.position)},this.position=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];window.innerWidth<=640?(t.overlay.style.display="block",t.options.style.position="fixed",t.options.style.left="auto",t.options.style.top="auto",t.options.style.left=(Math.ceil(window.innerWidth)-t.options.offsetWidth)/2+"px",t.options.style.top=(Math.ceil(window.innerHeight)-t.options.offsetHeight)/2+"px"):(t.overlay.style.display="none",t.options.style.position="absolute",t.options.style.left="",t.options.style.top=""),t.prevWinWidth=window.innerWidth},this.isVisible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},this.onClickPrev=function(){t.selectCompetition(t.competitions[t.activeCompetitionIdx-1])},this.onClickNext=function(){t.selectCompetition(t.competitions[t.activeCompetitionIdx+1])}},i);e.default=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(2),s=n(3),l=n(36),u=function(){function t(e,n,o){var i=e.container,a=e.select,s=this;r(this,t),this.onChange=function(t){s.dispatchAction((0,l.getMultiSelectValue)(t.target))},this.onBlur=function(){s.isAllSelected()&&s.dispatchAction(["all"]),s.close()},this.isAllSelected=function(){var t=s.state.filters.players.selected;return!Array.isArray(t)||!t.length||t.indexOf("all")>-1},this.onDocumentClick=function(t){for(var e=t.target;null!==e;){if(s.container.elm===e)return;e=e.parentNode}s.close()},this.container=i,this.select=a,this.store=o,document.addEventListener("mousedown",function(t){return s.onDocumentClick(t)}),document.addEventListener("touchend",function(t){return s.onDocumentClick(t)}),document.addEventListener("touchstart",function(t){return s.setState({touch:!0})}),this.setState(n)}return i(t,[{key:"setState",value:function(t){this.state=o({},this.state,t),this.render()}},{key:"render",value:function(){var t=this.state.filters.players,e=t.selected,n=t.lastChanged,r=this.isAllSelected(),o=((0,l.getDeepProp)(this.state,"data.filters.players")||[]).slice(0);o.sort(function(t,e){return t.Name.toLowerCase()>e.Name.toLowerCase()?1:t.Name.toLowerCase()<e.Name.toLowerCase()?-1:0});var i=this.open.bind(this),u=(0,a.html)("div",{key:"container",class:{"skoorin-results-filter-control-select-players":1,"no-options":!o.length,touch:this.state.touch},"on-click":i,"on-touchstart":i},(0,a.html)("select",{class:{placeholder:1,visible:!this.state.showMultiselect}},(0,a.html)("option",null,r?window.skoorinResults.l10n.all.players:1===e.length?e[0]:window.skoorinResults.l10n.multiple.players)),(0,a.html)("select",{key:"select-players",name:"players",multiple:!0,autoComplete:"off","on-change":this.onChange,"on-blur":this.onBlur,class:{visible:this.state.showMultiselect}},(0,a.html)("option",{key:"all",value:"all",selected:r},window.skoorinResults.l10n.all.players),o.map(function(t){var r=t.Name;return(0,a.html)("option",{key:r+"-"+(n||Date.now()),value:r,selected:e.indexOf(r)>-1},r)})));this.container instanceof Element&&(this.container.innerHTML=""),this.container=(0,s.patch)(this.container,u)}},{key:"open",value:function(){if(!this.state.showMultiselect){var t={showMultiselect:!0,hasOpened:!0};this.state.hasOpened||(t.filters=o({},this.state.filters,{players:o({},this.state.filters.players,{lastChanged:Date.now()})})),this.setState(t)}}},{key:"close",value:function(){this.state.showMultiselect&&this.setState({showMultiselect:!1})}},{key:"dispatchAction",value:function(t){this.store.dispatch({type:"FILTER",payload:{players:{selected:t,lastChanged:Date.now()}}})}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=e instanceof Array?e:e.split(n);return r.reduce(function(t,e){return t?t[e]:t},t)}function i(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".";if("undefined"!=typeof n&&e.length){var o=e instanceof Array?e:e.split(r);o.length>1?("undefined"==typeof t[o[0]]&&(t[o[0]]="number"==typeof o[1]?[]:{}),i(t[o[0]],o.slice(1),n)):t[o[0]]=n}return t}function a(t){return t.reduce(function(t,e){var n=parseFloat(e);return isNaN(n)?t:t+n},0)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in t)e[n]="object"==u(t[n])&&null!==t[n]?s(t[n],t[n].constructor()):t[n];return e}function l(t){return(t.selectedOptions?[].concat(r(t.selectedOptions)):[].concat(r(t.options)).filter(function(t){return t.selected})).map(function(t){return t.value})}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.getDeepProp=o,e.setDeepProp=i,e.arraySum=a,e.deepCopy=s,e.getMultiSelectValue=l,n(74)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");
}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(38);var u=n(2),c=n(73),f=r(c),p=n(3),d=n(36),h='<svg width="100%" height="100%" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="'+window.skoorinResults.profile_link_icon_path+'"/></svg>',y="$___NO_CLASS",m={BUE:{type:Boolean,totalFmt:"percent"},GRH:{type:Boolean,totalFmt:"percent"},OCP:{type:Boolean,totalFmt:"sum"},ICP:{type:Number,totalFmt:"percent"},IBP:{type:Boolean,totalFmt:"sum"},PEN:{type:Number,totalFmt:"sum"}},v=function(t){return(parseFloat(t)>0?"+":"")+t},b=function(){function t(e,n,r){i(this,t),this.toggleResultsExtra=function(t,e){if(e.preventDefault(),t){for(var n=e.target;"TR"!==n.tagName;)n=n.parentNode;n.classList.contains("expanded")?(n.parentNode.classList.remove("expanded"),n.classList.remove("expanded")):(n.parentNode.classList.add("expanded"),n.classList.add("expanded"))}},this.el=e,this.onChange=r,this.competitionID=null,this.setState(n)}return l(t,[{key:"setState",value:function(t){this.state=t,this.render()}},{key:"render",value:function(){var t=(0,d.getDeepProp)(this.state,"data.results"),e=t.Competition,n=e.ShowTourView?this.getTourSummaryTable(e):this.getCompetitionResultsTable(e);this.el instanceof Element&&(this.el.innerHTML=""),this.el=(0,p.patch)(this.el,n)}},{key:"getCompetitionResultsTable",value:function(t){var e=this,n=!!(t.SubCompetitions||[]).length,r=!n&&t.hasOwnProperty("MetrixMode")&&2==t.MetrixMode,o=t.hasOwnProperty("ShowPreviousRoundsSum")&&!!parseInt(t.ShowPreviousRoundsSum,10);this.competitionID!=t.ID&&(this.playersByClasses=this.getPlayersByClasses(this.aggregateResults()),this.orderPlayersByTotalScore(),this.rankPlayers(),this.competitionID=t.ID);var i=0,a=n?3:2,s=this.filterPlayers();return(0,u.html)("div",{className:"skoorin-results-table","class-loading":this.state.loading},(0,u.html)("div",{className:"skoorin-results-table-container table-scroll table-responsive"},(0,u.html)("table",{key:t.ID},(0,u.html)("colgroup",null,(0,u.html)("col",{width:"1%"}),(0,u.html)("col",{width:"100%"})),(0,u.html)("thead",null,(0,u.html)("tr",{className:"hole"},(0,u.html)("th",{className:"hole",colSpan:a}),this.state.data.results.Competition.Tracks.map(function(t,e){var n=t.Number;return(0,u.html)("th",null,n)}),(0,u.html)("th",null,window.skoorinResults.l10n.sum),(0,u.html)("th",null,window.skoorinResults.l10n.to_par),n||o?[(0,u.html)("th",null),(0,u.html)("th",null)]:""),(0,u.html)("tr",{className:"par"},(0,u.html)("th",{className:"par",colSpan:a},window.skoorinResults.l10n.par),this.state.data.results.Competition.Tracks.map(function(t,e){var n=t.Par;return i+=parseInt(n,10),(0,u.html)("th",null,n)}),(0,u.html)("th",null,i),(0,u.html)("th",null),n||o?[(0,u.html)("th",null),(0,u.html)("th",null)]:"")),s.order.map(function(i){return[i!=y&&s.byName[i].order.length?(0,u.html)("thead",{key:t.ID+"/"+i},(0,u.html)("tr",{className:"class"},(0,u.html)("th",{className:"class",colSpan:t.Tracks.length+(n?7:o?6:4)},i+" ("+e.playersByClasses.byName[i].order.length+")"))):"",s.byName[i].order.map(function(a,l){var c=s.byName[i].byName[a],p=Object.keys(c.PlayerResults),y=n&&r?p.length+p.length*Object.keys(m).length:p.length,b=(0,d.arraySum)(Object.values(c.Sum)),g=(0,d.arraySum)(Object.values(c.Diff)),w=t.ID+"/"+(c.UserID||c.Name);return(0,u.html)("tbody",{key:w},p.map(function(t,i){var a=(0,u.html)("tr",{key:w+"/"+t,"on-click":e.toggleResultsExtra.bind(e,r)},0!==i?"":[(0,u.html)("td",{key:[w,t,"standing"].join("/"),className:"standing",rowSpan:y},c.standing),(0,u.html)("td",{key:[w,t,"player"].join("/"),className:"player",rowSpan:y,title:c.Name},(0,u.html)("div",null,r?(0,u.html)("a",{className:"expand-metrix","on-click":function(t){return t.preventDefault()},href:"#"},(0,u.html)("i",null)," ",c.Name):c.Name,c.hasOwnProperty("UserID")?(0,u.html)("a",{className:"profile-link",target:"_blank",href:"https://dgmtrx.com/?u=player_stat&player_user_id="+c.UserID},(0,f.default)("span",{props:{innerHTML:h}})):""))],n?e.getSubcompetitionCell(t):"",c.PlayerResults[t].map(function(n,r){return e.getScoreCell(c,t,n,r)}),(0,u.html)("td",{className:"sum"},c.Sum[t]),(0,u.html)("td",{className:"diff"},v(c.Diff[t])),n&&0===i?[(0,u.html)("td",{key:[w,t,"sum"].join("/"),className:"sum",rowSpan:y},b),(0,u.html)("td",{key:[w,t,"diff"].join("/"),className:"diff",rowSpan:y},v(g))]:o?[(0,u.html)("td",{key:[w,t,"sum"].join("/"),className:"sum",rowSpan:y},c.PreviousRoundsSum),(0,u.html)("td",{key:[w,t,"diff"].join("/"),className:"diff",rowSpan:y},v(c.PreviousRoundsDiff))]:"");return r?[a].concat(e.getExtraRows(c,t,n,o)):a}))})]}))),(0,u.html)("span",{className:"spinner"},(0,u.html)("i",null),(0,u.html)("i",null)))}},{key:"getTourSummaryTable",value:function(t){var e=this;this.competitionID!=t.ID&&(this.playersByClasses=this.getPlayersByClasses(this.aggregateResults()),this.competitionID=t.ID);var n=this.filterPlayers();return(0,u.html)("div",{className:"skoorin-results-table","class-loading":this.state.loading},(0,u.html)("div",{className:"skoorin-results-table-container table-scroll table-responsive"},(0,u.html)("table",{key:t.ID},(0,u.html)("colgroup",null,(0,u.html)("col",{width:"1%"}),(0,u.html)("col",{width:"100%"})),(0,u.html)("thead",null,(0,u.html)("tr",{className:"tour-head"},(0,u.html)("th",null),(0,u.html)("th",null),t.Events.map(function(t){return(0,u.html)("th",null,(0,u.html)("a",{target:"_blank",href:"https://dgmtrx.com/?u=player_stat&player_user_id="+t.ID,"on-click":function(n){n.preventDefault(),"function"==typeof e.onChange&&e.onChange(t.ID,!0)}},t.Name))}),(0,u.html)("th",null,window.skoorinResults.l10n.total))),n.order.map(function(r){return[r!=y&&n.byName[r].order.length?(0,u.html)("thead",{key:t.ID+"/"+r},(0,u.html)("tr",{className:"class"},(0,u.html)("th",{className:"class",colSpan:t.Events.length+3},r+" ("+e.playersByClasses.byName[r].order.length+")"))):"",n.byName[r].order.map(function(e,o){var i=n.byName[r].byName[e],a=t.ID+"/"+(i.UserID||i.Name);return(0,u.html)("tbody",{key:a},(0,u.html)("tr",null,(0,u.html)("td",{className:"standing"},i.Place),(0,u.html)("td",{className:"player"},i.hasOwnProperty("UserID")?(0,u.html)("a",{target:"_blank",href:"https://dgmtrx.com/?u=player_stat&player_user_id="+i.UserID},i.Name):i.Name),t.Events.map(function(t,e){return(0,u.html)("td",null,"number"==typeof i.EventResults[e]||"string"==typeof i.EventResults[e]?i.EventResults[e]:"")}),(0,u.html)("td",{className:"total"},i.Total)))})]}))),(0,u.html)("span",{className:"spinner"},(0,u.html)("i",null),(0,u.html)("i",null)))}},{key:"aggregateResults",value:function(){var t={byName:{},order:[]},e=function e(n){var i=!!r.ShowTourView,a=n.Date+"T"+n.Time,l=i?n.TourResults:n.Results;(l||[]).forEach(function(e){t.byName.hasOwnProperty(e.Name)||(t.byName[e.Name]=s({},e),i||(t.byName[e.Name].Sum={},t.byName[e.Name].Diff={},t.byName[e.Name].PlayerResults=o({},a,[])),t.order.push(e.Name)),i||(t.byName[e.Name].Sum[a]=e.Sum,t.byName[e.Name].Diff[a]=e.Diff,t.byName[e.Name].PlayerResults[a]=[],(e.PlayerResults||[]).forEach(function(n){return t.byName[e.Name].PlayerResults[a].push(n)}))}),n.SubCompetitions&&(n.SubCompetitions||[]).length&&n.SubCompetitions.forEach(e)},n=(0,d.getDeepProp)(this.state,"data.results"),r=n.Competition;return r&&e(r),t}},{key:"getPlayersByClasses",value:function(t){return t.order.reduce(function(e,n){var r=t.byName[n].ClassName||y;return e.byName.hasOwnProperty(r)||(e.byName[r]={byName:{},order:[]},e.order.push(r)),e.byName[r].byName[n]=t.byName[n],e.byName[r].order.push(n),e},{byName:{},order:[]})}},{key:"orderPlayersByTotalScore",value:function(){var t=this,e=(0,d.getDeepProp)(this.state,"data.results"),n=e.Competition;if(n&&this.playersByClasses){var r=(Array.isArray(n.SubCompetitions)?n.SubCompetitions.length:0)+(Array.isArray(n.Results)&&n.Results.length?1:0),o=function(t){return"[object Object]"!={}.toString.call(t.PlayerResults)||Object.keys(t.PlayerResults).length<r},i=function(t){for(var e in t.PlayerResults){var n=!0,r=!1,o=void 0;try{for(var i,a=t.PlayerResults[e][Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if("[object Object]"!={}.toString.call(s)||!s.hasOwnProperty("Result"))return!0}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}return!1},a=n.hasOwnProperty("ShowPreviousRoundsSum")&&parseInt(n.ShowPreviousRoundsSum,10)?"PreviousRoundsDiff":"Diff",s=function(t){return"[object Object]"=={}.toString.call(t)?(0,d.arraySum)(Object.values(t)):t};this.playersByClasses.order.forEach(function(e){var n=t.playersByClasses.byName[e];n.order.sort(function(t,e){var r=n.byName[t],l=n.byName[e];return!i(r)&&i(l)?-1:i(r)&&!i(l)?1:!o(r)&&o(l)?-1:o(r)&&!o(l)?1:s(r[a])<s(l[a])?-1:s(r[a])>s(l[a])?1:n.order.indexOf(t)<n.order.indexOf(e)?-1:n.order.indexOf(t)>n.order.indexOf(e)?1:0})})}}},{key:"rankPlayers",value:function(){var t=this,e=(0,d.getDeepProp)(this.state,"data.results"),n=e.Competition;if(n&&this.playersByClasses){var r=n.hasOwnProperty("ShowPreviousRoundsSum")&&parseInt(n.ShowPreviousRoundsSum,10)?"PreviousRoundsDiff":"Diff";this.playersByClasses.order.forEach(function(e){var n=0,o=0;t.playersByClasses.byName[e].order.forEach(function(i){var a=t.playersByClasses.byName[e].byName[i],s="[object Object]"=={}.toString.call(a[r])?(0,d.arraySum)(Object.values(a[r])):a[r];s!=o&&n++,o=s,a.standing=n})})}}},{key:"filterPlayers",value:function(){var t=this,e=(0,d.deepCopy)(this.playersByClasses),n={players:"Name",classes:"ClassName",groups:"Group"},r=function(e){return"players"!=e?"all"!=t.state.filters[e]:Array.isArray(t.state.filters.players.selected)&&t.state.filters.players.selected.indexOf("all")<0},o=function(o){if(r(o))return e.order.forEach(function(r){var i=e.byName[r];i.order=i.order.filter(function(e){var r=i.byName[e][n[o]];return"players"!=o?t.state.filters[o]==r:Array.isArray(t.state.filters.players.selected)&&t.state.filters.players.selected.indexOf(r)>-1}),e.byName[r]=i}),"break"};for(var i in this.state.filters){var a=o(i);if("break"===a)break}return e}},{key:"getSubcompetitionCell",value:function(t){var e=t.split("T"),n=a(e,2),r=n[0],o=n[1],i=r.split("-"),s=a(i,3),l=s[0],c=s[1],f=s[2],p=o.split(":"),d=a(p,2),h=d[0],y=d[1],m=c+"/"+f+"/"+l+" "+h+":"+y;return(0,u.html)("td",null,m)}},{key:"getScoreCell",value:function(t,e,n,r){var o=this.state.data.results.Competition,i=(0,d.getDeepProp)(o,["Tracks",r,"Number"])||r+1,a=[o.ID,t.UserID||t.Name,e,"hole-"+i+"score"].join("/"),s=this.getScoreClass(n),l=[i,n.Diff,s.title,s.isOB?window.skoorinResults.l10n.score_tooltip_ob.replace(/&#013;/g,"\n"):""],c=-1,f=window.skoorinResults.l10n.score_tooltip.replace(/&#013;/g,"\n").replace(/%s/g,function(){return c++,l[c]});return(0,u.html)("td",{key:a,className:s.class,title:f},n.Result||"")}},{key:"getScoreClass",value:function(t){var e=t.Result,n=t.Diff,r=t.OB,o=void 0,i=!!Number(r),a=i?" ob":"";if("undefined"==typeof e)o="no-score";else if(1==e)o="hole-in-one";else switch(n){case-2:o="eagle";break;case-1:o="birdie";break;case 0:o="par";break;case 1:o="bogey";break;case 2:o="double-bogey";break;default:o=n<-2?"eagle":"fail"}return{title:window.skoorinResults.l10n.score_terms[o],isOB:i,class:o+a}}},{key:"getExtraRows",value:function(t,e,n,r){var o=this,i=this.state.data.results.Competition;return Object.keys(m).map(function(a){var s=[i.ID,e,t.UserID||t.Name,a].join("/");return(0,u.html)("tr",{key:s,className:"extra "+a.toLowerCase()},(0,u.html)("td",{colSpan:n?1:2},window.skoorinResults.l10n.extra[a]),t.PlayerResults[e].map(function(t,e){return(0,u.html)("td",{key:s+"/"+e},o.getExtraNotation(t,a))}),(0,u.html)("td",{colSpan:"2"},t[("PEN"==a?"Penalties":a)+"Total"]||""),n||!r?"":(0,u.html)("td",{colSpan:"2"},t["PreviousRounds"+("PEN"==a?"Penalties":a)]||""))})}},{key:"getExtraNotation",value:function(t,e){var n=parseInt(t[e],10);switch(m[e].type){case Boolean:return n?"✔":"";case Number:default:return n?n:""}}}]),t}();e.default=b},function(t,e,n){n(39),t.exports=n(42).Object.values},function(t,e,n){var r=n(40),o=n(58)(!1);r(r.S,"Object",{values:function(t){return o(t)}})},function(t,e,n){var r=n(41),o=n(42),i=n(43),a=n(53),s=n(56),l="prototype",u=function(t,e,n){var c,f,p,d,h=t&u.F,y=t&u.G,m=t&u.S,v=t&u.P,b=t&u.B,g=y?r:m?r[e]||(r[e]={}):(r[e]||{})[l],w=y?o:o[e]||(o[e]={}),S=w[l]||(w[l]={});y&&(n=e);for(c in n)f=!h&&g&&void 0!==g[c],p=(f?g:n)[c],d=b&&f?s(p,r):v&&"function"==typeof p?s(Function.call,p):p,g&&a(g,c,p,t&u.U),w[c]!=p&&i(w,c,d),v&&S[c]!=p&&(S[c]=p)};r.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(44),o=n(52);t.exports=n(48)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(45),o=n(47),i=n(51),a=Object.defineProperty;e.f=n(48)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(46);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(48)&&!n(49)(function(){return 7!=Object.defineProperty(n(50)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(49)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(46),o=n(41).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(46);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(41),o=n(43),i=n(54),a=n(55)("src"),s="toString",l=Function[s],u=(""+l).split(s);n(42).inspectSource=function(t){return l.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(l&&(i(n,a)||o(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||l.call(this)})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(57);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(59),o=n(61),i=n(72).f;t.exports=function(t){return function(e){for(var n,a=o(e),s=r(a),l=s.length,u=0,c=[];l>u;)i.call(a,n=s[u++])&&c.push(t?[n,a[n]]:a[n]);return c}}},function(t,e,n){var r=n(60),o=n(71);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(54),o=n(61),i=n(65)(!1),a=n(69)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),l=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;e.length>l;)r(s,n=e[l++])&&(~i(u,n)||u.push(n));return u}},function(t,e,n){var r=n(62),o=n(64);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(63);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(61),o=n(66),i=n(68);t.exports=function(t){return function(e,n,a){var s,l=r(e),u=o(l.length),c=i(a,u);if(t&&n!=n){for(;u>c;)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(67),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(67),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(70)("keys"),o=n(55);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(41),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){function r(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var o=0;o<e.length;++o)r(e[o].data,e[o].children,e[o].sel)}var o=n(5),i=n(6);t.exports=function(t,e,n){var a,s,l,u={};if(void 0!==n?(u=e,i.array(n)?a=n:i.primitive(n)&&(s=n)):void 0!==e&&(i.array(e)?a=e:i.primitive(e)?s=e:u=e),i.array(a))for(l=0;l<a.length;++l)i.primitive(a[l])&&(a[l]=o(void 0,void 0,void 0,a[l]));return"s"===t[0]&&"v"===t[1]&&"g"===t[2]&&r(u,a,t),o(t,u,a,s,void 0)}},function(t,e,n){n(75),n(88),t.exports=n(42).Array.from},function(t,e,n){"use strict";var r=n(76)(!0);n(77)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(67),o=n(64);t.exports=function(t){return function(e,n){var i,a,s=String(o(e)),l=r(n),u=s.length;return l<0||l>=u?t?"":void 0:(i=s.charCodeAt(l),i<55296||i>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):i:t?s.slice(l,l+2):(i-55296<<10)+(a-56320)+65536)}}},function(t,e,n){"use strict";var r=n(78),o=n(40),i=n(53),a=n(43),s=n(54),l=n(79),u=n(80),c=n(84),f=n(86),p=n(85)("iterator"),d=!([].keys&&"next"in[].keys()),h="@@iterator",y="keys",m="values",v=function(){return this};t.exports=function(t,e,n,b,g,w,S){u(n,e,b);var x,k,E,N=function(t){if(!d&&t in T)return T[t];switch(t){case y:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},_=e+" Iterator",C=g==m,O=!1,T=t.prototype,R=T[p]||T[h]||g&&T[g],j=R||N(g),P=g?C?N("entries"):j:void 0,I="Array"==e?T.entries||R:R;if(I&&(E=f(I.call(new t)),E!==Object.prototype&&(c(E,_,!0),r||s(E,p)||a(E,p,v))),C&&R&&R.name!==m&&(O=!0,j=function(){return R.call(this)}),r&&!S||!d&&!O&&T[p]||a(T,p,j),l[e]=j,l[_]=v,g)if(x={values:C?j:N(m),keys:w?j:N(y),entries:P},S)for(k in x)k in T||i(T,k,x[k]);else o(o.P+o.F*(d||O),e,x);return x}},function(t,e){t.exports=!1},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(81),o=n(52),i=n(84),a={};n(43)(a,n(85)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(45),o=n(82),i=n(71),a=n(69)("IE_PROTO"),s=function(){},l="prototype",u=function(){var t,e=n(50)("iframe"),r=i.length,o="<",a=">";for(e.style.display="none",n(83).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(o+"script"+a+"document.F=Object"+o+"/script"+a),t.close(),u=t.F;r--;)delete u[l][i[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[l]=r(t),n=new s,s[l]=null,n[a]=t):n=u(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(44),o=n(45),i=n(59);t.exports=n(48)?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),s=a.length,l=0;s>l;)r.f(t,n=a[l++],e[n]);return t}},function(t,e,n){t.exports=n(41).document&&document.documentElement},function(t,e,n){var r=n(44).f,o=n(54),i=n(85)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(70)("wks"),o=n(55),i=n(41).Symbol,a="function"==typeof i,s=t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)("Symbol."+t))};s.store=r},function(t,e,n){var r=n(54),o=n(87),i=n(69)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(64);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(56),o=n(40),i=n(87),a=n(89),s=n(90),l=n(66),u=n(91),c=n(92);o(o.S+o.F*!n(94)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,p=i(t),d="function"==typeof this?this:Array,h=arguments.length,y=h>1?arguments[1]:void 0,m=void 0!==y,v=0,b=c(p);if(m&&(y=r(y,h>2?arguments[2]:void 0,2)),void 0==b||d==Array&&s(b))for(e=l(p.length),n=new d(e);e>v;v++)u(n,v,m?y(p[v],v):p[v]);else for(f=b.call(p),n=new d;!(o=f.next()).done;v++)u(n,v,m?a(f,y,[o.value,v],!0):o.value);return n.length=v,n}})},function(t,e,n){var r=n(45);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(79),o=n(85)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){"use strict";var r=n(44),o=n(52);t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){var r=n(93),o=n(85)("iterator"),i=n(79);t.exports=n(42).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(63),o=n(85)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:i?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(85)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},t(i)}catch(t){}return n}}]);
//# sourceMappingURL=skoorin-results.js.map